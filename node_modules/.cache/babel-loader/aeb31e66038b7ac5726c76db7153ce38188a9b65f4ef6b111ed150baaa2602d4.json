{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InterByteTimeoutParser = void 0;\nconst stream_1 = require(\"stream\");\n/**\n * A transform stream that buffers data and emits it after not receiving any bytes for the specified amount of time or hitting a max buffer size.\n */\nclass InterByteTimeoutParser extends stream_1.Transform {\n  maxBufferSize;\n  currentPacket;\n  interval;\n  intervalID;\n  constructor({\n    maxBufferSize = 65536,\n    interval,\n    ...transformOptions\n  }) {\n    super(transformOptions);\n    if (!interval) {\n      throw new TypeError('\"interval\" is required');\n    }\n    if (typeof interval !== 'number' || Number.isNaN(interval)) {\n      throw new TypeError('\"interval\" is not a number');\n    }\n    if (interval < 1) {\n      throw new TypeError('\"interval\" is not greater than 0');\n    }\n    if (typeof maxBufferSize !== 'number' || Number.isNaN(maxBufferSize)) {\n      throw new TypeError('\"maxBufferSize\" is not a number');\n    }\n    if (maxBufferSize < 1) {\n      throw new TypeError('\"maxBufferSize\" is not greater than 0');\n    }\n    this.maxBufferSize = maxBufferSize;\n    this.currentPacket = [];\n    this.interval = interval;\n  }\n  _transform(chunk, encoding, cb) {\n    if (this.intervalID) {\n      clearTimeout(this.intervalID);\n    }\n    for (let offset = 0; offset < chunk.length; offset++) {\n      this.currentPacket.push(chunk[offset]);\n      if (this.currentPacket.length >= this.maxBufferSize) {\n        this.emitPacket();\n      }\n    }\n    this.intervalID = setTimeout(this.emitPacket.bind(this), this.interval);\n    cb();\n  }\n  emitPacket() {\n    if (this.intervalID) {\n      clearTimeout(this.intervalID);\n    }\n    if (this.currentPacket.length > 0) {\n      this.push(Buffer.from(this.currentPacket));\n    }\n    this.currentPacket = [];\n  }\n  _flush(cb) {\n    this.emitPacket();\n    cb();\n  }\n}\nexports.InterByteTimeoutParser = InterByteTimeoutParser;","map":{"version":3,"names":["Object","defineProperty","exports","value","InterByteTimeoutParser","stream_1","require","Transform","maxBufferSize","currentPacket","interval","intervalID","constructor","transformOptions","TypeError","Number","isNaN","_transform","chunk","encoding","cb","clearTimeout","offset","length","push","emitPacket","setTimeout","bind","Buffer","from","_flush"],"sources":["/Users/kimdoyeon/Desktop/CapstonDesign1/node_modules/@serialport/parser-inter-byte-timeout/dist/index.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InterByteTimeoutParser = void 0;\nconst stream_1 = require(\"stream\");\n/**\n * A transform stream that buffers data and emits it after not receiving any bytes for the specified amount of time or hitting a max buffer size.\n */\nclass InterByteTimeoutParser extends stream_1.Transform {\n    maxBufferSize;\n    currentPacket;\n    interval;\n    intervalID;\n    constructor({ maxBufferSize = 65536, interval, ...transformOptions }) {\n        super(transformOptions);\n        if (!interval) {\n            throw new TypeError('\"interval\" is required');\n        }\n        if (typeof interval !== 'number' || Number.isNaN(interval)) {\n            throw new TypeError('\"interval\" is not a number');\n        }\n        if (interval < 1) {\n            throw new TypeError('\"interval\" is not greater than 0');\n        }\n        if (typeof maxBufferSize !== 'number' || Number.isNaN(maxBufferSize)) {\n            throw new TypeError('\"maxBufferSize\" is not a number');\n        }\n        if (maxBufferSize < 1) {\n            throw new TypeError('\"maxBufferSize\" is not greater than 0');\n        }\n        this.maxBufferSize = maxBufferSize;\n        this.currentPacket = [];\n        this.interval = interval;\n    }\n    _transform(chunk, encoding, cb) {\n        if (this.intervalID) {\n            clearTimeout(this.intervalID);\n        }\n        for (let offset = 0; offset < chunk.length; offset++) {\n            this.currentPacket.push(chunk[offset]);\n            if (this.currentPacket.length >= this.maxBufferSize) {\n                this.emitPacket();\n            }\n        }\n        this.intervalID = setTimeout(this.emitPacket.bind(this), this.interval);\n        cb();\n    }\n    emitPacket() {\n        if (this.intervalID) {\n            clearTimeout(this.intervalID);\n        }\n        if (this.currentPacket.length > 0) {\n            this.push(Buffer.from(this.currentPacket));\n        }\n        this.currentPacket = [];\n    }\n    _flush(cb) {\n        this.emitPacket();\n        cb();\n    }\n}\nexports.InterByteTimeoutParser = InterByteTimeoutParser;\n"],"mappings":"AAAA,YAAY;;AACZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DD,OAAO,CAACE,sBAAsB,GAAG,KAAK,CAAC;AACvC,MAAMC,QAAQ,GAAGC,OAAO,CAAC,QAAQ,CAAC;AAClC;AACA;AACA;AACA,MAAMF,sBAAsB,SAASC,QAAQ,CAACE,SAAS,CAAC;EACpDC,aAAa;EACbC,aAAa;EACbC,QAAQ;EACRC,UAAU;EACVC,WAAWA,CAAC;IAAEJ,aAAa,GAAG,KAAK;IAAEE,QAAQ;IAAE,GAAGG;EAAiB,CAAC,EAAE;IAClE,KAAK,CAACA,gBAAgB,CAAC;IACvB,IAAI,CAACH,QAAQ,EAAE;MACX,MAAM,IAAII,SAAS,CAAC,wBAAwB,CAAC;IACjD;IACA,IAAI,OAAOJ,QAAQ,KAAK,QAAQ,IAAIK,MAAM,CAACC,KAAK,CAACN,QAAQ,CAAC,EAAE;MACxD,MAAM,IAAII,SAAS,CAAC,4BAA4B,CAAC;IACrD;IACA,IAAIJ,QAAQ,GAAG,CAAC,EAAE;MACd,MAAM,IAAII,SAAS,CAAC,kCAAkC,CAAC;IAC3D;IACA,IAAI,OAAON,aAAa,KAAK,QAAQ,IAAIO,MAAM,CAACC,KAAK,CAACR,aAAa,CAAC,EAAE;MAClE,MAAM,IAAIM,SAAS,CAAC,iCAAiC,CAAC;IAC1D;IACA,IAAIN,aAAa,GAAG,CAAC,EAAE;MACnB,MAAM,IAAIM,SAAS,CAAC,uCAAuC,CAAC;IAChE;IACA,IAAI,CAACN,aAAa,GAAGA,aAAa;IAClC,IAAI,CAACC,aAAa,GAAG,EAAE;IACvB,IAAI,CAACC,QAAQ,GAAGA,QAAQ;EAC5B;EACAO,UAAUA,CAACC,KAAK,EAAEC,QAAQ,EAAEC,EAAE,EAAE;IAC5B,IAAI,IAAI,CAACT,UAAU,EAAE;MACjBU,YAAY,CAAC,IAAI,CAACV,UAAU,CAAC;IACjC;IACA,KAAK,IAAIW,MAAM,GAAG,CAAC,EAAEA,MAAM,GAAGJ,KAAK,CAACK,MAAM,EAAED,MAAM,EAAE,EAAE;MAClD,IAAI,CAACb,aAAa,CAACe,IAAI,CAACN,KAAK,CAACI,MAAM,CAAC,CAAC;MACtC,IAAI,IAAI,CAACb,aAAa,CAACc,MAAM,IAAI,IAAI,CAACf,aAAa,EAAE;QACjD,IAAI,CAACiB,UAAU,CAAC,CAAC;MACrB;IACJ;IACA,IAAI,CAACd,UAAU,GAAGe,UAAU,CAAC,IAAI,CAACD,UAAU,CAACE,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,CAACjB,QAAQ,CAAC;IACvEU,EAAE,CAAC,CAAC;EACR;EACAK,UAAUA,CAAA,EAAG;IACT,IAAI,IAAI,CAACd,UAAU,EAAE;MACjBU,YAAY,CAAC,IAAI,CAACV,UAAU,CAAC;IACjC;IACA,IAAI,IAAI,CAACF,aAAa,CAACc,MAAM,GAAG,CAAC,EAAE;MAC/B,IAAI,CAACC,IAAI,CAACI,MAAM,CAACC,IAAI,CAAC,IAAI,CAACpB,aAAa,CAAC,CAAC;IAC9C;IACA,IAAI,CAACA,aAAa,GAAG,EAAE;EAC3B;EACAqB,MAAMA,CAACV,EAAE,EAAE;IACP,IAAI,CAACK,UAAU,CAAC,CAAC;IACjBL,EAAE,CAAC,CAAC;EACR;AACJ;AACAlB,OAAO,CAACE,sBAAsB,GAAGA,sBAAsB"},"metadata":{},"sourceType":"script","externalDependencies":[]}